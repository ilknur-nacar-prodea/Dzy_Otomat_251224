sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/core/UIComponent","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/BusyIndicator","sap/m/MessageToast","sap/m/library","sap/ui/core/routing/History"],function(e,t,a,i,o,r,n,l,d,s){"use strict";var u,p,c,h,M,g;var m=new t;return e.extend("app.DzyOtomat.controller.MachineSocket",{formatter:a,onInit:function(){var e=i.getRouterFor(this);e.getRoute("MachineSocket").attachMatched(this._onObjectMatchedDetail,this)},_onObjectMatchedDetail:function(e){var t=e.getParameter("arguments");u=t.trip;p=t.ino;c=t.location;h=t.machine;M=t.control;g=t.detail.split("#");if(g.length>1){var a={Matnr:g[0],Maktx:g[1],Current:g[2],Filled:g[3],Emptied:g[4],Bad:g[5],Last:g[6],Sold:g[7],Cap:g[8],Meins:g[9],Return:g[10]}}this.getView().setModel(m,"oMaterial");this.getView().getModel("oMaterial").setData(a)},onChangeAmount:function(){var e=this.getView().getModel("oMaterial").getData();e.Filled=this.byId("IdInpFilled").getValue();e.Return=this.byId("IdInpReturn").getValue();e.Bad=this.byId("IdInpBad").getValue();if(Number(e.Filled)>e.Cap){e.Filled=e.Cap}if(Number(e.Return)>e.Cap){e.Return=e.Cap}if(Number(e.Bad)>e.Cap){e.Bad=e.Cap}this.getView().getModel("oMaterial").setData(e);this.byId("IdInpFilled").setValue(e.Filled);this.byId("IdInpReturn").setValue(e.Return);this.byId("IdInpBad").setValue(e.Bad)},onNavBack:function(){var e=this.getView().getModel("oMaterial").getData();var t=e.Matnr+"#"+e.Maktx+"#"+e.Current+"#"+e.Filled+"#"+e.Emptied+"#"+e.Bad+"#"+e.Last+"#"+e.Sold+"#"+e.Cap+"#"+e.Meins+"#"+e.Return;i.getRouterFor(this).navTo("MachineUpload",{trip:u,ino:p,location:c,machine:h,control:M,detail:t})}})});